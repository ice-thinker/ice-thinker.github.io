<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>支付银行网关重构设计 | 知、行——人生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="为什么 ？  技术框架采用比较老的框架，项目不是基于Maven，依赖管理复杂。 基于JFinal 框架，接口&amp;amp;参数定义不清晰。 代码多人经手，结构混乱，可维护性差。开发该系统的人，基本上都离职光，导致目前团队内没有一个人对该系统的代码熟悉。 可测性不强（大部分功能，无法通过Mock 第三方接口来充分测试，尤其是异常流程测试）。 无资损熔断机制（目前对于能力有缺陷的通道没有基于对方业务不可">
<meta name="keywords" content="设计,支付,重构">
<meta property="og:type" content="article">
<meta property="og:title" content="支付银行网关重构设计">
<meta property="og:url" content="https://ice-thinker.github.io/2019/04/14/yhwgcgsl/index.html">
<meta property="og:site_name" content="知、行——人生">
<meta property="og:description" content="为什么 ？  技术框架采用比较老的框架，项目不是基于Maven，依赖管理复杂。 基于JFinal 框架，接口&amp;amp;参数定义不清晰。 代码多人经手，结构混乱，可维护性差。开发该系统的人，基本上都离职光，导致目前团队内没有一个人对该系统的代码熟悉。 可测性不强（大部分功能，无法通过Mock 第三方接口来充分测试，尤其是异常流程测试）。 无资损熔断机制（目前对于能力有缺陷的通道没有基于对方业务不可">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://ice-thinker.github.io/2019/04/14/yhwgcgsl/bgwxtjg.png">
<meta property="og:updated_time" content="2019-04-17T15:01:41.990Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="支付银行网关重构设计">
<meta name="twitter:description" content="为什么 ？  技术框架采用比较老的框架，项目不是基于Maven，依赖管理复杂。 基于JFinal 框架，接口&amp;amp;参数定义不清晰。 代码多人经手，结构混乱，可维护性差。开发该系统的人，基本上都离职光，导致目前团队内没有一个人对该系统的代码熟悉。 可测性不强（大部分功能，无法通过Mock 第三方接口来充分测试，尤其是异常流程测试）。 无资损熔断机制（目前对于能力有缺陷的通道没有基于对方业务不可">
<meta name="twitter:image" content="https://ice-thinker.github.io/2019/04/14/yhwgcgsl/bgwxtjg.png">
  
    <link rel="alternate" href="/atom.xml" title="知、行——人生" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">知、行——人生</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">知行人生：审、慎、度、行。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ice-thinker.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-yhwgcgsl" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/14/yhwgcgsl/" class="article-date">
  <time datetime="2019-04-14T00:02:07.000Z" itemprop="datePublished">2019-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工程/">工程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      支付银行网关重构设计
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="为什么"><a class="markdownIt-Anchor" href="#为什么"></a> 为什么 ？</h2>
<ul>
<li>技术框架采用比较老的框架，项目不是基于Maven，依赖管理复杂。</li>
<li>基于JFinal 框架，接口&amp;参数定义不清晰。</li>
<li>代码多人经手，结构混乱，可维护性差。开发该系统的人，基本上都离职光，导致目前团队内没有一个人对该系统的代码熟悉。</li>
<li>可测性不强（大部分功能，无法通过Mock 第三方接口来充分测试，尤其是异常流程测试）。</li>
<li>无资损熔断机制（目前对于能力有缺陷的通道没有基于对方业务不可用的异常金额熔断机制）。</li>
<li>日志打印不规范，定位问题麻烦，无法根据日志进行告警设置（所有的日志基本都是INFO），导致出现故障，都是业务方先发现。</li>
</ul>
<h2 id="重构目标"><a class="markdownIt-Anchor" href="#重构目标"></a> 重构目标</h2>
<ul>
<li>采用基于Maven 的项目，统一管理依赖。</li>
<li>采用成熟流行的Spring Boot，重新抽象，提供统一的门面接口，对业务方屏蔽细节，代码结构清晰，提高可维护性、可扩展性。</li>
<li>变化与不变分离，防止每次修改污染到其他功能，导致每次上线，都要回归所有的功能，增加测试的工作量。</li>
<li>适配可测性需求，可以通过Mock 第三方接口进行异常模拟测试。</li>
<li>规范日志打印，方便问题定位，并做好异常告警买点，能够及时发现异常。</li>
<li>增加资损熔断</li>
<li>能够基于业务进行接口级进行灰度。</li>
</ul>
<h2 id="风险与对策"><a class="markdownIt-Anchor" href="#风险与对策"></a> 风险与对策</h2>
<ul>
<li>重构、改动大、开发时间短（封闭开发12天，投入人力3.5人）</li>
<li>测试工作量大，测试投入少（投入人力1人，预计测试5天）</li>
</ul>
<table>
<thead>
<tr>
<th>风险点</th>
<th>策略</th>
</tr>
</thead>
<tbody>
<tr>
<td>银行对接</td>
<td>1、不改变给银行提供的IP.<br>2、不改变给银行提供的url<br>3、开发环境Mock 银行接口，达到可测性、充分测试。</td>
</tr>
<tr>
<td>入侵性</td>
<td>1、对现有系统上下文，实现0入侵，兼容现有的业务接口。<br>2、可以回滚</td>
</tr>
<tr>
<td>平滑升级</td>
<td>1、新老银行网关可以共存。<br>2、通过新系统，可以路由到老的银行网关，解决根据银行通道进行灰度的问题。</td>
</tr>
</tbody>
</table>
<h2 id="方法论"><a class="markdownIt-Anchor" href="#方法论"></a> 方法论</h2>
<ul>
<li>抽象：共性和个性分离，变化与不变分离。</li>
<li>职责清晰：基于SOA机制，系统之间依赖于接口，系统之间互相屏蔽细节。</li>
<li>系统等级化原则：原则上底层是不能直接调用上层接口，从而避免循环关系、等到等级化的原则。</li>
<li>兜底：从资损的角度来看，系统设计必须存在兜底的策略（控制资损为第一原则）。</li>
<li>敏捷开发：基于银行通道、接口来进行开发（基于Story），持续交付（解决测试工作量峰值），基于Story提测，避免测试等待、突然忙碌。</li>
</ul>
<h2 id="工具"><a class="markdownIt-Anchor" href="#工具"></a> 工具</h2>
<table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mock工具</td>
<td>1、采用Kong<br>2、模拟正常返回<br>3、模拟异常测试（模拟各种Http状态、超时）<br>4、模拟各种业务异常状态</td>
</tr>
<tr>
<td>开发工具</td>
<td>1、Maven<br>2、Eclipse<br>3、Git(Github)<br>4、Jenkins<br>5、Sonarqube(代码静态扫描)</td>
</tr>
<tr>
<td>技术工具</td>
<td>1、SpringBoot<br>2、Mybatis<br>3、Redis<br>4、MySQL<br>5、Nginx</td>
</tr>
</tbody>
</table>
<h2 id="设计"><a class="markdownIt-Anchor" href="#设计"></a> 设计</h2>
<h3 id="系统架构"><a class="markdownIt-Anchor" href="#系统架构"></a> 系统架构</h3>
<p><img src="/2019/04/14/yhwgcgsl/bgwxtjg.png" alt=""></p>
<p><strong>关键设计点</strong></p>
<table>
<thead>
<tr>
<th>关键点</th>
<th>方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>抽象</td>
<td>1、子系统依赖SOA(RESTFul)接口，对其他子系统的细节透明。<br>2、通过统一的门面，对上游业务提供稳定的接口，通用参数和个性参数。<br>3、Bank-Proxy、Bank-Front 具有统一的抽象模型：Bank。Bank-Proxy 采用代理模式。Bank-Front 采用构建模式、复合模式。</td>
</tr>
<tr>
<td>路由</td>
<td>1、（业务编码、通道名称、接口）—&gt;Bank-Front—&gt;Bank。<br>2、（业务编码、通道名称、接口、资费）—&gt;Bank-Front—&gt;Bank。<br></td>
</tr>
<tr>
<td>反应堆系统</td>
<td>1、通过队列、异步维护系统原则（等级化、非循环原则）。<br>2、Timer 采用指数退避机制进行补偿（保证性通知）</td>
</tr>
<tr>
<td>补偿任务</td>
<td>1、处理确定的终态，对非终态（不确定的状态）采用补偿（或者Pending）<br>2、兜底（阻损策略，控制资金损失为第一原则）</td>
</tr>
</tbody>
</table>
<h3 id="动力视图"><a class="markdownIt-Anchor" href="#动力视图"></a> 动力视图</h3>
<pre class="mermaid">sequenceDiagram
     participant Trade
     participant BankProxy
     participant BankFront
     participant Bank
     participant ReactorGw
     participant Timer
     Trade->>BankProxy:Pay Order
     BankProxy->>BankProxy:幂等性、发现路由、资损控制
     BankProxy->>BankFront: Pay Order
     alt Normal
         BankFront->>Bank:Pay Order
         Bank->>BankFront: Status
         BankFront->>BankProxy:Status
         BankProxy->>Trade:Status
     else Exception
         BankFront->>Bank:Pay Order
         BankFront->BankFront:Exceptions,Unknown state
         BankFront->>ReactorGw:Timed task
     end
     Bank-->>BankFront:Call back
     BankFront-->>ReactorGw:Notify
     ReactorGw--x Trade:async notify
     ReactorGw->ReactorGw: Handle Result
     alt Fail
     ReactorGw->ReactorGw:Save timer task
     end
     loop Loop task
     Timer-->Timer:Find task(补偿)
     Timer-->>BankProxy:Compensation transaction
     alt Success
     BankProxy-->>Timer:Final state
     Timer-->>Trade:async notify
     else Fail
     BankProxy-->>Timer:Non-Final state
     alt Time Out
     Timer-->>BankProxy:Rollback
     else Non-Time Out
     Timer->Timer:Update next time
     end
     end
     end</pre>
<p><strong>动力视图说明</strong></p>
<ul>
<li>简要画出子系统之间的调用。</li>
<li>Timer：定时任务采用指数退避算法进行重试，到达一定的数次，采用固定的时间去尝试。</li>
<li>反应堆系统：采用队列、异步调用打破系统循环关系。</li>
<li>Timer 与BankProxy的调用：BankProxy根据路由关系，路由到相应的BankFront。</li>
</ul>
<h3 id="事务补偿策略"><a class="markdownIt-Anchor" href="#事务补偿策略"></a> 事务补偿策略</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    事务初始化--&gt;|执行原子|初始化</span><br><span class="line">    初始化--&gt;|执行|成功</span><br><span class="line">    初始化--&gt;|执行|失败</span><br><span class="line">    初始化--&gt;|执行|未知</span><br><span class="line">    成功--&gt;|执行|业务成功</span><br><span class="line">    业务成功--&gt;事务终止</span><br><span class="line">    失败--&gt;业务失败</span><br><span class="line">    业务失败--&gt;回滚</span><br><span class="line">    回滚--&gt;回滚成功</span><br><span class="line">    回滚成功--&gt;事务终止</span><br><span class="line">    回滚--&gt;回滚失败</span><br><span class="line">    回滚失败--&gt;Pengding告警</span><br><span class="line">    未知--&gt;|补偿|成功</span><br><span class="line">    未知--&gt;|补偿|失败</span><br></pre></td></tr></table></figure>
<p><strong>关键设计</strong></p>
<ul>
<li>状态未知：网络读超时，被调用方返回未知的状态码（该错误码不能说明成功或者失败，对于成功的错误码必须是明确的状态，同时失败的状态码必须）。</li>
<li>假如成功状态是200，那么失败的状态 禁止：非200的状态，失败的状态，必须列出，比如201，202。其他状态认为非终态，比如203。</li>
<li>补偿机制：注意幂等性操作，先查询、后补偿（一般是查询对方状态，更新本地状态）。</li>
<li>通道能力：被依赖的通道具备查询接口，则进行指数退避补偿。被依赖的通道不具备查询接口，则进行资损熔断。</li>
</ul>
<h3 id="兜底"><a class="markdownIt-Anchor" href="#兜底"></a> 兜底</h3>
<p>做最坏的打算，系统设计总会有不尽人意的地方，所以必须做最坏的打算。 系统设计如此，人生亦如此。</p>
<p><strong>正确认识成功或者失败</strong></p>
<ul>
<li>区分业务上的成功 和业务上的失败。</li>
<li>内部失败：比如写数据库失败。</li>
<li>如果是业务成功 + 内部失败，则可以返回调用方业务成功或者Pengding。</li>
<li>如果业务失败，则返回调用方业务失败。</li>
</ul>
<p><strong>一个血的案例</strong></p>
<ul>
<li>这个例子 由于没有正确识别业务成功 和内部失败，导致资金损失。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">  Actor--&gt;&gt;Trade:提现</span><br><span class="line">  Trade--&gt;&gt;BGW:提现</span><br><span class="line">  BGW--&gt;&gt;Bank:提现</span><br><span class="line">  Bank--&gt;&gt;Bank:增加用户账户余额</span><br><span class="line">  Bank--&gt;&gt;BGW:成功</span><br><span class="line">  Bank--&gt;&gt;用户:银行账户收到xx金额</span><br><span class="line">  BGW--&gt;&gt;BGW:写DB失败</span><br><span class="line">  BGW--&gt;&gt;Trade:失败</span><br><span class="line">  Trade--&gt;&gt;Trade:回滚账户余额</span><br><span class="line">  用户--&gt;&gt;用户:看到账户余额没有变少</span><br><span class="line">  用户--&gt;&gt;Actor:提现</span><br></pre></td></tr></table></figure>
<h3 id="资损控制策略"><a class="markdownIt-Anchor" href="#资损控制策略"></a> 资损控制策略</h3>
<table>
<thead>
<tr>
<th>问题</th>
<th>策略</th>
<th>动作</th>
</tr>
</thead>
<tbody>
<tr>
<td>银行通道能力有缺陷</td>
<td>1、日常异常金额&gt;= X 告警<br>2、日累积异常金额&gt;=Y，通道暂时不可用，并告警</td>
<td>1、接收告警，要第一时间联系银行。<br>2、提供手工清除不可用标识</td>
</tr>
<tr>
<td>银行能力完备</td>
<td>走完整的事务补偿流程</td>
<td></td>
</tr>
<tr>
<td>自动退款</td>
<td>1、自动退款日累积金额，超过日常金额，转手工确认。<br>2、单笔最大超过xx，转手工确认退款</td>
<td>防止自动退款由于某个异常，造成损失。</td>
</tr>
<tr>
<td>手工退款</td>
<td>1、提供异常订单查询系统<br>2、提供手工退款功能</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="平滑升级灰度"><a class="markdownIt-Anchor" href="#平滑升级灰度"></a> 平滑升级（灰度）</h2>
<p><strong>通过BankProxy 灰度</strong></p>
<ul>
<li>通过Proxy 基于银行通道的灰度</li>
</ul>
<pre class="mermaid">graph TD
Trade-->Nginx
Nginx-->Bank.Proxy
Bank.Proxy-->Old_BGW
Old_BGW-->A_Bank
Bank.Proxy-->Bank.Front
Bank.Front-->B_Bank</pre>
<p><strong>通过Nginx 灰度</strong></p>
<pre class="mermaid">graph TD
Trade-->Nginx
Nginx-->Old_BGW
Old_BGW-->A_Bank
Nginx-->Bank.Proxy
Bank.Proxy-->Bank.Front
Bank.Front-->B_Bank</pre>
<h2 id="架构优点"><a class="markdownIt-Anchor" href="#架构优点"></a> 架构优点</h2>
<p><strong>变化与不变的分离</strong></p>
<ul>
<li>反应堆系统（Reactor）：依赖于抽象，逻辑是稳定的。</li>
<li>Bank_Proxy：依赖于抽象，是稳定的。</li>
<li>Bank_Front：是变化的，可以微服务（模块化），对变化的边界是可控的。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ice-thinker.github.io/2019/04/14/yhwgcgsl/" data-id="cjulfkc1h00213tfy8vn2p0mv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/支付/">支付</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计/">设计</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/重构/">重构</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/04/17/ywxtjk/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          业务监控系统设计
        
      </div>
    </a>
  
  
    <a href="/2019/03/23/tjyzl/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">统计与真理</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/哲思/">哲思</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/哲思/批判/">批判</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/哲思/现实/">现实</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工程/">工程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/思想/">思想</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/工程/">工程</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/知/">知</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/知/智慧/">智慧</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/管理/">管理</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/信念/">信念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/勇气/">勇气</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原则/">原则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/反思/">反思</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/哲学/">哲学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工程/">工程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思想/">思想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思考/">思考</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/批判/">批判</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术/">技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/支付/">支付</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/方法论/">方法论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/细节/">细节</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计/">设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/重构/">重构</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/信念/" style="font-size: 10px;">信念</a> <a href="/tags/勇气/" style="font-size: 10px;">勇气</a> <a href="/tags/原则/" style="font-size: 13.33px;">原则</a> <a href="/tags/反思/" style="font-size: 13.33px;">反思</a> <a href="/tags/哲学/" style="font-size: 13.33px;">哲学</a> <a href="/tags/工程/" style="font-size: 13.33px;">工程</a> <a href="/tags/思想/" style="font-size: 16.67px;">思想</a> <a href="/tags/思考/" style="font-size: 16.67px;">思考</a> <a href="/tags/感悟/" style="font-size: 13.33px;">感悟</a> <a href="/tags/批判/" style="font-size: 10px;">批判</a> <a href="/tags/技术/" style="font-size: 13.33px;">技术</a> <a href="/tags/支付/" style="font-size: 10px;">支付</a> <a href="/tags/数学/" style="font-size: 10px;">数学</a> <a href="/tags/方法论/" style="font-size: 10px;">方法论</a> <a href="/tags/架构/" style="font-size: 13.33px;">架构</a> <a href="/tags/生活/" style="font-size: 16.67px;">生活</a> <a href="/tags/细节/" style="font-size: 10px;">细节</a> <a href="/tags/设计/" style="font-size: 13.33px;">设计</a> <a href="/tags/软件/" style="font-size: 20px;">软件</a> <a href="/tags/重构/" style="font-size: 10px;">重构</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/17/ywxtjk/">业务监控系统设计</a>
          </li>
        
          <li>
            <a href="/2019/04/14/yhwgcgsl/">支付银行网关重构设计</a>
          </li>
        
          <li>
            <a href="/2019/03/23/tjyzl/">统计与真理</a>
          </li>
        
          <li>
            <a href="/2019/03/23/psxtsj/">推送系统设计</a>
          </li>
        
          <li>
            <a href="/2019/03/10/push-wenti/">PUSH 问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 知鱼<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>